
<!--   *******************************Start: What source js file to use? ****************************************************   -->


<!-- the online version that these examples were made with  -->

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.4"></script>





<!-- the newest version script tag is below but by using it all the examples may not work 

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>

-->



<!-- Or you could download the newest version, save it as myNewDownloadedTensorflow.js and use the link below and work completely offline using a tag similar to


<script src="myNewDownloadedTensorflow.js"></script>

-->

 <!-- Note: often nice to load the readable version of the src file. Remember to match the numbers to whatever the newest version is.

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.4/dist/tf.js"></script>

--> 



<!--   *******************************Stop: What source js file to use? ****************************************************   -->



    
    
<h2 align=center>Convolutional Keras Layers Single Digit Color Image Example!</h2>






<div style="font-size:15px; background-color:lightyellow; width:88%;  border:5px solid blue; padding:5px; margin:5px;"> 
Keras Single Digit Image using a Convolutional Layer.<br><br>

 Working with black (1) and white (0) images is not much fun, so in this example RGB(50,150,250), 
 by the way that is the color blue, will be converted into single digit colors, losing some information but
 making things much easier to understand and and also to see the image as a chart of data.<br><br>
 
0: white<br>
1: black<br>
2: red<br>
3: orange<br>
4: yellow<br>
5: green<br>
6: blue<br>
7: indigo<br>
8: violet<br>
9: brown<br><br>
 
In this Convolutional Neural Network we will train the basic shapes:<br>
 no-shape, circles, triangles, rectangles. With only 4 outputs we can use one-hot vector encoding.<br><br> 
 Note: So far only no shape and circles have been minimally trained.<br>
</div><br>

 
 
 


<div id="myDiv7979Code"> 

Test or change this data <br>
<textarea id="myAsk2" rows=40 cols=100 wrap=false>
 7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,7,7,7,7,2,2,2,2,2,2,2,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,7,7,7,7,7,7,7,7,2,2,2,2,2,7,7
,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,7,7,7,7,7,7,7,7,2,2,2,2,2,2,7
,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,7
,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,7
,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,7
,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,7,7,7,7,7,7,7,7,2,2,2,2,2,2,7
,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,7,7,7,7,7,7,7,7,2,2,2,2,2,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,7,7,7,7,2,2,2,2,2,2,2,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,7,7,7,7,7,7,7,7
,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
</textarea><br>
<input id="myButton7979" type="button" value="Train images and test" onclick="{ 
                                                                                    
document.getElementById('myButton7979').style.backgroundColor = 'red' 
                                                                              
const xs = tf.tensor4d([                                                                                                                                                
                                                                                                                                                                        
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0
,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0
,0,0,0,0,9,9,9,9,9,9,9,9,0,0,0,0,0,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0
,0,0,0,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,0,0,0,0,0,0
,0,0,0,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,0,0,0,0,0,0
,0,0,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,0,0,0,0,0
,0,0,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,0,0,0,0,0
,0,0,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,0,0,0,0,0
,0,0,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,0,0,0,0,0
,0,0,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,0,0,0,0,0
,0,0,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,0,0,0,0,0
,0,0,0,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,0,0,0,0,0,0
,0,0,0,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,0,0,0,0,0,0
,0,0,0,0,9,9,9,9,9,9,9,9,0,0,0,0,0,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0
,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0
,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0                                                                                                                                                              

   
   
   
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,9,9,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,9,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,9,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,9,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,9,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,9,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,9,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,9,9,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0                                                                                                                                                                

   
   
   
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0,0
,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0
,0,0,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0
,0,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,0,0
,0,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0,0
,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,0
,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0
,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0
,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0
,0,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,0
,0,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0,0
,0,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,0,0
,0,0,0,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0
,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,0,0,0,0
,0,0,0,0,0,0,0,0,9,9,9,9,9,9,0,0,0,0,0,0,0,0,9,9,9,9,9,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0    

   
   
   
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,9,9,8,8,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,0,0,0,0,8,9,8,8,0,0,0,0,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,0,0,0,0,9,0,9,9,0,9,0,9,9,0,9,0,0,0,9,9,9,9,9,9,9
,9,9,9,9,9,9,0,0,9,0,0,0,0,9,9,9,0,9,9,9,0,9,9,0,0,0,0,9,9,9,9,9
,9,9,9,9,9,0,0,0,9,0,9,0,0,9,9,0,0,9,9,9,0,0,9,9,9,0,0,9,9,9,9,9
,9,9,9,9,9,0,0,9,9,0,8,0,0,9,0,0,0,0,0,0,9,8,9,9,0,0,0,9,9,9,9,9
,9,9,9,9,9,0,0,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,0,0,0,9,9,9,9,9
,9,9,9,9,9,0,0,9,9,0,0,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9
,9,9,9,9,9,0,0,9,0,0,0,0,0,0,9,9,9,9,9,0,0,0,0,0,0,0,0,9,9,1,9,9
,9,9,9,9,8,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,9,9,9,9,9
,9,9,9,9,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,1,9
,9,9,9,0,9,1,9,9,0,0,9,9,9,9,0,0,9,9,9,9,9,9,0,9,9,1,1,1,0,9,1,9
,9,0,9,0,1,1,9,9,9,0,0,9,9,9,9,0,0,9,9,1,9,9,0,9,1,1,1,1,1,9,9,9
,9,9,8,9,1,1,1,1,9,9,0,9,9,9,9,9,9,9,9,9,9,9,0,9,1,1,1,1,9,9,1,9
,9,9,0,9,9,9,1,1,9,9,0,9,9,9,9,9,9,9,9,9,9,0,9,9,1,1,9,9,9,9,1,9
,9,9,0,9,9,9,9,9,1,9,0,0,9,9,1,9,9,9,9,9,9,0,9,9,9,9,9,9,9,0,1,9
,9,9,9,9,9,9,9,9,9,9,8,0,1,9,1,9,9,1,1,9,9,0,9,9,9,9,9,9,9,8,1,9
,9,9,9,0,0,9,9,9,9,9,9,0,9,1,9,9,9,1,1,1,0,9,9,9,9,9,9,8,9,1,1,9
,9,9,9,9,0,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,0,0,8,9,9,1,1,9
,9,9,9,9,8,9,8,0,0,0,0,0,0,9,1,9,1,1,1,1,0,0,1,0,8,0,8,9,9,1,9,9
,9,9,9,9,9,1,9,0,0,9,0,0,9,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,9,9
,9,9,9,9,9,1,1,0,9,0,0,9,1,1,1,1,1,1,1,1,1,9,0,0,0,9,1,1,1,9,9,9
,9,9,9,9,9,9,1,1,1,1,0,9,9,9,9,9,9,9,9,9,9,9,1,9,9,1,9,1,1,9,9,9
,9,9,9,9,9,9,9,1,1,1,0,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,1,1,9,9,9,9
,9,9,9,9,9,9,9,1,1,1,1,0,0,8,9,9,9,9,8,8,0,8,1,1,9,1,1,9,9,9,9,9
,9,9,9,9,9,9,9,9,1,9,1,1,0,9,9,9,9,9,9,9,9,1,1,1,1,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,1,1,9,0,0,0,0,0,0,9,9,9,1,1,1,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9  
 
   
   
   
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,9,8,9,9,9,9,9,9,9,9,9,9,9,9,1
,9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,0,8,8,8,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8
,9,9,9,9,9,9,9,9,9,9,9,9,9,1,1,1,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,0,0,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,9,1,1,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,8,0,0,9,1,9,9,9,9,1,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,9,0,0,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,0,0,0,0,8,0,0,0,0,0,0,9,9,9,9,9,1,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,0,0,0,0,8,8,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,8,0,0,9,0,0,0,0,0,8,8,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,8,9,0,0,0,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,8,8,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9
 
   
   
   
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,9,9,9,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0,0,0,0,0,0
,0,0,0,0,8,0,0,0,0,0,0,0,9,9,0,1,0,0,0,0,0,0,0,0,9,9,9,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,9,9,0,9,0,0,0,0,0,0,9,9,9,0,0,0,9,9,0,0,0,0,0
,0,0,0,0,0,0,9,0,0,9,0,0,9,9,9,0,9,1,9,9,0,0,0,0,0,0,1,9,9,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,0,9,0,0,9,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,0,9,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,0,0,0,0,0,0,8,0,0
,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,0,0
,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,9,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,9,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,1,0,8,9,0,0,0,0,0,0,0,0,0,0,0
,0,0,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0
,0,0,9,9,9,9,9,0,0,0,0,0,0,0,0,0,9,0,0,9,8,8,0,0,0,0,0,0,9,9,0,0
,0,0,0,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,0,9,9,0,0,0,0
,0,0,0,0,9,9,0,0,0,0,0,1,0,0,0,0,9,9,9,9,9,9,9,9,9,0,0,0,9,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,9,9,0,0,0,9,9,9,9,9,9,9,9,0,0,0,9,9,0,0,0
,0,0,0,0,0,0,0,0,0,8,0,0,8,0,0,0,0,9,9,9,9,9,9,1,0,0,8,9,0,0,0,0
,0,0,0,0,0,0,0,9,9,0,9,9,9,0,0,9,0,0,9,9,9,1,0,0,9,9,9,0,0,0,0,0
,0,0,0,0,0,0,0,0,9,9,9,9,9,0,0,0,0,0,8,0,0,0,0,8,1,9,9,0,0,0,0,0
,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,0,0,0,0,0,0,0,8,9,9,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,0,0,0,0,0,0,0,8,8,9,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,8,0,8,8,8,8,8,9,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,9,9,9,8,9,9,8,8,8,8,9,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0  
 
   
   
   
,0,0,9,0,1,0,0,0,0,9,1,9,9,0,9,9,9,8,9,9,8,9,0,9,9,9,1,1,0,0,0,9
,1,9,0,0,0,8,0,9,9,0,8,1,9,9,9,9,9,9,9,9,9,8,0,0,9,9,8,8,9,9,9,0
,9,9,0,9,0,0,9,9,9,1,1,9,1,9,0,0,9,9,9,9,9,1,0,9,9,9,0,0,0,9,0,0
,8,9,0,0,9,0,0,9,0,1,8,0,1,9,9,1,9,9,9,9,0,9,9,9,9,9,9,8,9,0,9,9
,0,9,8,8,8,0,9,0,9,0,9,9,0,9,0,0,8,9,8,0,9,0,0,0,9,9,0,1,0,9,9,9
,0,0,9,0,8,1,0,0,9,9,0,9,1,9,0,0,1,9,0,0,1,1,0,9,9,9,0,9,1,9,0,9
,9,9,1,1,9,8,9,9,1,1,9,0,0,0,9,1,9,9,9,1,9,1,9,9,9,9,0,9,1,1,0,0
,1,9,1,8,0,0,9,9,9,8,0,9,0,0,9,9,9,9,9,0,0,1,9,1,9,0,0,1,9,0,0,0
,9,9,9,0,0,0,9,0,9,9,9,9,0,0,8,0,0,1,0,9,1,9,0,9,9,0,1,8,9,0,9,0
,9,9,1,9,0,0,0,9,9,9,9,9,0,0,9,9,9,0,9,9,0,9,0,0,9,0,1,0,1,0,9,9
,0,9,0,9,9,1,9,1,0,0,0,0,9,0,9,9,0,1,9,0,9,9,1,0,9,0,1,9,1,9,9,9
,9,9,0,1,9,9,9,9,9,0,9,9,1,9,9,1,9,1,9,0,1,9,9,9,9,0,9,1,0,9,9,9
,8,0,9,1,0,1,9,1,9,0,9,9,1,0,0,0,9,1,0,9,9,0,9,0,0,9,0,9,9,9,9,0
,0,0,0,1,9,9,9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,1,0,9,9,9,0,9,0,0,0,0
,0,9,1,0,8,9,9,9,9,9,9,8,0,9,9,1,9,0,9,0,1,9,9,9,9,9,9,9,0,9,9,9
,9,9,9,1,8,9,9,9,9,9,0,0,9,8,1,0,0,0,9,9,0,9,9,0,9,9,9,9,9,0,0,1
,9,9,9,9,9,8,0,0,9,9,9,8,9,0,1,0,0,9,9,9,1,1,9,9,9,9,1,9,9,1,9,0
,1,9,9,9,1,1,1,9,0,9,9,9,8,9,9,9,0,0,0,0,9,9,1,9,9,9,9,0,1,9,0,9
,0,0,0,9,9,1,9,1,0,0,9,1,0,0,8,9,9,9,0,0,1,9,9,8,9,9,1,0,1,9,0,9
,0,0,9,9,9,0,0,9,8,9,9,0,0,9,1,9,9,0,1,9,9,9,9,0,8,9,9,0,0,1,1,0
,0,0,0,1,9,0,0,0,9,0,0,0,8,9,9,8,0,0,9,8,0,0,9,0,9,0,0,9,9,0,0,0
,1,1,9,9,9,9,9,9,9,9,0,9,9,0,9,9,9,0,0,9,0,0,8,0,1,0,0,8,0,0,0,0
,1,9,0,9,9,9,0,1,9,9,9,9,0,9,9,9,9,1,8,0,9,8,9,9,9,0,0,9,9,9,0,0
,0,9,0,9,9,0,0,0,9,1,9,9,0,0,9,9,0,9,9,9,0,1,9,0,8,9,1,1,0,1,0,0
,9,0,0,9,9,0,9,9,9,9,9,0,9,0,8,8,9,0,8,0,9,0,0,9,9,8,9,9,9,0,9,9
,9,1,9,9,9,9,0,0,9,9,9,0,0,9,0,0,9,9,9,0,9,0,0,9,9,9,9,9,9,1,9,9
,9,9,0,0,1,9,9,9,9,9,9,9,9,0,0,8,9,9,9,9,9,9,8,9,9,0,0,9,9,1,9,1
,9,9,1,9,9,9,9,9,9,1,0,9,9,8,9,9,9,9,9,1,1,9,9,1,9,9,9,1,9,9,9,8
,0,9,9,0,9,9,9,9,9,9,1,9,0,0,9,9,9,1,9,9,9,1,9,9,0,9,0,1,9,9,9,1
,9,9,0,9,9,8,9,9,9,9,9,9,9,0,9,0,9,9,9,0,9,9,9,9,8,1,0,9,9,9,9,9
,0,9,9,9,0,9,1,0,0,1,9,1,8,0,1,9,9,1,9,1,9,0,9,8,9,9,0,9,0,9,8,9
,0,9,9,9,9,9,9,0,0,9,0,0,8,9,9,9,9,9,8,9,9,9,9,9,9,9,9,0,8,9,0,9 

   
   
,1,1,1,1,1,9,9,1,1,1,9,1,1,9,9,9,9,1,9,1,9,1,1,1,9,9,9,1,9,9,1,1
,1,1,1,1,1,9,1,9,1,1,9,1,9,1,9,9,1,9,9,1,1,1,1,9,9,1,9,1,1,1,9,1
,1,9,1,1,1,9,1,1,1,9,1,1,9,9,1,1,1,9,9,9,9,9,9,9,9,1,1,1,1,9,1,9
,9,1,9,1,1,1,9,9,9,9,9,1,9,1,9,1,9,9,1,9,9,9,1,9,9,9,9,9,9,9,1,1
,9,9,9,9,1,9,9,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,9,1,1
,9,9,1,1,9,9,9,9,1,9,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1,9,9,9,9,9
,9,9,1,9,9,9,9,9,9,9,9,1,9,1,1,9,1,1,9,9,9,9,1,9,1,9,9,9,9,9,1,1
,9,9,1,1,0,8,9,8,1,9,1,9,1,9,1,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,8
,9,9,1,1,9,1,9,9,0,9,9,1,8,9,9,9,1,8,9,9,1,9,9,1,9,9,9,1,9,1,9,9
,9,9,9,1,0,9,9,9,9,9,9,1,9,9,1,8,9,9,9,9,1,1,9,9,1,9,8,9,9,1,9,9
,1,1,1,9,9,1,9,9,9,1,1,9,9,9,9,9,1,1,1,1,9,9,1,1,9,9,1,9,9,1,1,9
,9,1,1,9,1,9,1,9,1,1,9,9,9,9,1,9,9,9,1,9,9,9,9,9,9,9,9,9,9,9,9,1
,9,1,9,1,9,9,9,1,9,1,1,1,1,9,9,9,9,9,9,9,1,1,1,9,1,9,1,9,9,9,1,9
,1,9,1,9,9,1,9,9,1,9,1,9,1,1,1,1,1,9,1,9,9,9,1,1,9,9,1,9,9,1,9,1
,9,1,1,1,9,1,1,9,1,1,9,9,1,1,1,1,9,9,9,9,1,9,9,1,1,9,9,9,9,1,1,1
,1,1,1,9,1,9,1,1,1,9,1,1,1,9,9,9,1,9,1,9,1,1,1,9,9,9,1,1,1,1,9,9
,1,1,1,1,9,9,1,1,1,1,1,9,1,1,9,1,1,1,9,1,9,1,9,1,1,1,1,1,1,9,9,1
,1,1,1,9,1,1,9,9,1,1,9,1,1,9,9,1,9,9,9,9,1,1,1,9,1,9,9,9,1,9,1,1
,9,1,1,9,9,1,1,1,9,1,1,9,9,9,1,9,1,1,9,1,1,9,1,1,9,9,9,1,9,1,1,1
,9,9,1,9,1,9,1,9,1,9,9,9,1,9,9,1,9,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9
,9,9,1,8,9,1,1,1,1,9,9,1,1,9,1,1,8,9,9,9,1,1,9,1,9,9,9,1,8,9,9,1
,8,1,1,1,9,9,9,9,1,9,1,8,1,9,1,9,1,1,9,9,9,9,1,8,9,1,1,9,1,1,9,9
,9,9,9,1,9,0,9,9,9,1,9,9,1,1,1,0,1,9,9,1,9,9,9,9,9,9,9,1,9,1,1,0
,9,0,1,8,1,9,1,1,1,9,9,9,9,1,0,9,9,1,1,1,8,9,9,9,1,8,9,9,9,1,9,1
,1,9,9,1,1,9,1,9,9,9,9,9,9,0,8,9,9,1,9,9,9,9,9,9,8,9,9,9,1,9,1,9
,0,9,9,1,9,9,9,9,8,1,9,9,9,1,8,1,9,1,9,1,9,9,9,9,9,9,9,9,9,9,9,9
,9,9,8,1,1,9,9,9,9,1,9,1,1,9,1,1,1,8,1,9,1,9,9,1,9,9,0,9,9,9,1,1
,1,1,9,9,1,1,9,8,9,1,1,1,9,9,9,1,9,9,9,9,9,1,9,9,9,9,9,9,9,9,9,9
,9,9,9,9,1,1,9,9,9,9,1,1,1,9,1,1,1,1,1,9,9,9,1,9,9,9,9,9,9,9,1,1
,9,9,9,1,9,1,9,9,9,1,9,9,1,9,9,1,9,9,9,9,1,9,1,9,9,1,1,1,1,1,9,9
,1,9,1,1,1,1,1,1,1,9,1,9,1,1,9,1,9,9,1,9,9,1,9,1,9,9,1,9,9,9,9,9
,1,9,1,9,1,1,9,1,9,9,1,1,9,1,9,9,1,9,9,1,9,1,1,1,1,1,1,1,9,1,1,1

                                                                                    
], shape=[8, 32, 32, 1] );    // 8 input images that are 32 x 32 with  10 colors 0-9)                                                                                                                                                     
                                                                                                                                                                        
// Labels of how many lines in each image. I can make much more images just few here for simplicity                                                                     
const ys = tf.tensor2d([0,1,0,0,    0,1,0,0,    0,1,0,0,    0,1,0,0,    0,1,0,0,    0,1,0,0,    1,0,0,0,   1,0,0,0 ], shape=[8, 4]);        // 8 images 4 dimension                                                                                                                  
                                                                                                                                                                        
                                                                                                                                                                        
model = tf.sequential();                                                                                                                                          
                                                                                                                                                                        
model.add(tf.layers.conv2d({                                                                                                                                            
    inputShape: [32, 32, 1],                                                                                                                                                  
    kernelSize: 2,                                                                                                                                                          
    filters: 4,                                                                                                                                                             
    strides: 8,                                                                                                                                                             
    activation: 'relu',                                                                                                                                                     
    kernelInitializer: 'varianceScaling'                                                                                                                                    
}));                                                                                                                                                                    
                                                                                                                                                                        
model.add(tf.layers.conv2d({ kernelSize: 2, filters: 4, strides: 8, activation: 'relu', kernelInitializer: 'varianceScaling' }));                                       
                                                                                                                                                                        
model.add(tf.layers.flatten());                                                                                                                                         
model.add(tf.layers.dense({ units: 30, kernelInitializer: 'varianceScaling', activation: 'softmax' }));                                                                 
model.add(tf.layers.dense({ units: 4, activation: 'linear' }) ); 
                                          
model.compile({optimizer: 'sgd', loss: 'meanSquaredError'});   
                                                                              
//document.getElementById('myButton7979').style.backgroundColor = 'red'   
                                                                              
(async function() { // inline async so we can use promises and await                                                                                                   
                                                                                                                                                                        
                                                                                                                   
    var myFit = await model.fit(xs, ys, { 
      batchSize: 8192, 
      epochs : 700, 
      callbacks :  {  
                                                                              
          onBatchEnd: async (batch, logs) => {                                                               
              await tf.nextFrame();  // This improves UI responsiveness during training.  
          },       
                                                                              
         onEpochEnd: async (epoch, logs) => {                                            
              document.getElementById('myDiv7979').innerHTML = 'Loss after Epoch ' + epoch + '/700 : ' + logs.loss +' <br><br>'                                                               
         }   
                                                                              
      }  // end all callbacks                                                                        
    });  // end model.fit                                                                                                              
    
  await document.getElementById('myButtonTest').click() 
  document.getElementById('myButton7979').style.backgroundColor = 'yellow'                                                                               
})()
                                                                                                                                                                      

                                                                                                                                                                       
}" > 
 
<input  type="button" id="myButtonTest" value="Re-Test" onclick="{  
  (async function () {                                                                                                                                                                                                                                                                                                                                                                                                                                      
    const myPredictArray = await model.predict(tf.tensor4d(document.getElementById('myAsk2').value.split(','), [1, 32, 32, 1])).data()                                                                                                                                      
   // document.getElementById('myDiv7979').innerHTML = 'Input '+document.getElementById('myAsk2').value+'<br><br> Output = <br>'                                                                                                                                    
    document.getElementById('myDiv7979').innerHTML  = 'Output = <br>'
    document.getElementById('myDiv7979').innerHTML += '<b>No Shape ' + await Math.round(myPredictArray[0]*100) +'%</b><br>'          
    document.getElementById('myDiv7979').innerHTML += '<b>Circle ' + await Math.round(myPredictArray[1]*100) +'%</b><br>'        
    document.getElementById('myDiv7979').innerHTML += '<b>Triangle ' + await Math.round(myPredictArray[2]*100) +'%</b><br>'        
    document.getElementById('myDiv7979').innerHTML += '<b>Rectangle ' + await Math.round(myPredictArray[3]*100) +'%</b><br>'    
              
                                                             
 })()   // end the inline async function
}" >  
</div>
<div id='myDiv7979'>...</div><br>



<input id="myUpdate7979" type=button value="Update and Run" style="visibility:hidden;" onclick="{

   // first remove first and last line since they are injected
  myFred = document.getElementById('myTextarea7979').value.split('\n')
  myFred.pop()
  myFred.push('')
  myFred.shift()
  myFred.shift()
  myJoe = myFred.join('\n')

  document.getElementById('myDiv7979Code').innerHTML =    myJoe 
  document.getElementById('myButton7979').click()
                                             
}"><br>


<textarea id="myTextarea7979"  wrap="off"  style= "font-size:15px; color:white; background-color:black; width:90%;"   rows=2 onclick="{
  if (myOnce7979){
     myTextGrow('myTextarea7979', 'myDiv7979Code')
     document.getElementById('myUpdate7979').style.visibility = 'visible'
     myOnce7979 = false
  }
}">
Click here to see the working HTML code.
</textarea><br>







<br><br><br><hr><br><br><br><br>
























This <a href="https://github.com/hpssjellis/beginner-tensorflowjs-examples-in-javascript">Github</a>, ...  
this <a href="https://hpssjellis.github.io/beginner-tensorflowjs-examples-in-javascript/">Github Website Version</a>, ... 
this <a href="http://rocksetta.com/tensorflowjs/">Hosted Website Version</a>, ... 
<a href="https://js.tensorflow.org/">Tensorflowjs</a> <br> <br>



By Jeremy Ellis <br>
Twitter<a href="https://twitter.com/@rocksetta">@rocksetta</a><br>
Website <a href="http://rocksetta.com">http://rocksetta.com</a><br>
Use at your own risk!
    
    
    


 
 
 

<!--  Following is a helper functions  to grow the textareas  -->

<script>

myOnce7979 = true    // so textareas are only clicked once
//myOnce124 = true  

function myTextGrow(myT, myB){
   var myCursorStart = document.getElementById(myT).selectionStart
   var myCursorEnd = document.getElementById(myT).selectionEnd

   myDivName = myB.replace('Code','')
   document.getElementById(myT).value = '\x3Cscript src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.4"> \x3C/script> \n\n' + document.getElementById(myB).innerHTML 
   document.getElementById(myT).value += '<div id=\''+myDivName+'\'>...</div><br>'     
   setTimeout(function() {
      while (  document.getElementById(myT).clientHeight < document.getElementById(myT).scrollHeight){                                                                                                                                               
          document.getElementById(myT).rows += 3; 
      } 
   }, 100)

  document.getElementById(myT).selectionStart = myCursorStart
  document.getElementById(myT).selectionEnd = myCursorEnd

}  


</script>  
 
 
</body>
